<!DOCTYPE html>
<html>
<!-- bwedgar.github.io/PushToTelescope   -->

<head>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="apple-touch-icon" href="launch3.png">
  <link rel="apple-touch-startup-image" href="launch3.png">

  <link rel="manifest" href="manifest.json">
  <link rel="canonical" href="https://bwedgar.github.io/PushToTelescope" />

  <title>Document</title>
  <meta name="apple-mobile-web-app-title" content="Push To Telescope">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">


  <script src="https://bwedgar.github.io/buttons/buttons.js"></script>
  <!-- <script src="../buttons/buttons.js"></script> -->

  <!-- <script src="sw.js"></script> -->

</head>


<body>
  <main id="camera">
      <!-- Camera sensor -->
      <canvas id="camera--sensor"></canvas>
      <!-- Camera view -->
      <video id="camera--view" autoplay playsinline></video>
      <!-- Camera output -->
      <img src="//:0" alt="" id="camera--output">
      <!-- Camera trigger -->
      <button id="camera--trigger">Take a picture</button>
  </main>

  <script>
    var b = Buttons
    // Set constraints for the video stream
  var constraints = { video: { facingMode: "user" }, audio: false };
  // Define constants
  const cameraView = document.querySelector("#camera--view"),
      cameraOutput = document.querySelector("#camera--output"),
      cameraSensor = document.querySelector("#camera--sensor"),
      cameraTrigger = document.querySelector("#camera--trigger")
  // Access the device camera and stream to cameraView
  function cameraStart() {
      navigator.mediaDevices
          .getUserMedia(constraints)
          .then(function(stream) {
          track = stream.getTracks()[0];
          cameraView.srcObject = stream;
      })
      .catch(function(error) {
          console.error("Oops. Something is broken.", error);
      });
  }
  // Take a picture when cameraTrigger is tapped
  cameraTrigger.onclick = function() {
      cameraSensor.width = cameraView.videoWidth;
      cameraSensor.height = cameraView.videoHeight;
      cameraSensor.getContext("2d").drawImage(cameraView, 0, 0);
      cameraOutput.src = cameraSensor.toDataURL("image/webp");
      cameraOutput.classList.add("taken");
  };
  // Start the video stream when the window loads
  window.addEventListener("load", cameraStart, false);


  </script>
</body>

</html>
